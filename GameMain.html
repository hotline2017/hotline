<!doctype html>
<html>
<head>
<meta charset="utf8">
<title>Socket.IO CharMove</title>
<style>
    body {
  margin: 0;
        }
    .wrapper{
  width: 100%;
  height: 100%;
  position: fixed;

}
</style>
</head>
<body>

<div class="wrapper">
<canvas id="canvas"></canvas>
</div>

<script src="/socket.io/socket.io.js"></script>
<script src="/js/jquery.min.js"></script>
<script>

    posx = 0;
    posy = 100;
    speedx = 1;
    speedy = 1;

    var bg = new Image();
    bg.src = "image/StageBG.jpg";

    window.onload = function(){
                var w = $('.wrapper').width();
                var h = $('.wrapper').height();
                $('#canvas').attr('width', w);
                $('#canvas').attr('height', h);

				renderer_canvas();
			}


    var renderer_canvas = function(){

            var canvas = $("#canvas").get(0);
            var ctx = canvas.getContext('2d');
            //ctx.drawImage(bg, 0, 0, $('#canvas').width(), $('#canvas').height());

            ctx.beginPath();
            ctx.arc(posx,posy, 60, 0, Math.PI * 2, false);
            ctx.fill(); //fill()だと塗りつぶし
            posx += speedx;
            posy += speedy;
            if(posx > $('#canvas').width() || posx < 0)
            {
                speedx = -speedx;
            }
            if(posy > $('#canvas').height() || posy < 100)
            {
                speedy = -speedy;
            }
			progress_timer = setTimeout("renderer_canvas()", 16);
		}

$(function () {
	var socket = io();

	var name   = null;
	$(document)
		.on("keypress", function(e){
		});
		
	socket.on('movechar', function(data){
		console.log("[socket] movechar", data);
	});
});
</script>
</body>
</html>